<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jobs</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'myapp/css/styles.css' %}">
    <style>
        .job-item {

            align-items: center;
            margin-bottom: 10px;
        }

        .job-input {
            margin-left: 20px; /* Adjust as needed */
        }

        .positive-number-input {
    width: 30px; /* Adjust width of number input */
    text-align: center;
    height: 100%; /* Make the input box height equal to its container's height */
    background-color: #ffd700; /* Yellow color */
            color: #000; /* Black text color */
            padding: 3px 6px; /* Adjust padding as needed */
            border-radius: 5px; /* Rounded corners */
}

        .job-section {
            margin-top: 20px;
            border: 2px solid #f5f5f5;
            border-radius: 8px;
            padding: 10px;
            background-color: #f5f5f5;



        }

        .job-section-title {
            font-size: 1.8em;
            margin-bottom: 10px;
            color: #333;
            width: 100%; /* Extend title width */
            text-align: center; /* Center-align the title */
        }

        .job-button {
            font-size: 1.2em;
            padding: 8px;
            margin: 10px 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%; /* Extend the width to 100% of the container */
            color: #000; /* Black text color */
            border: 1px solid #ccc;
            border-radius: 8px;
            overflow: hidden;
            text-decoration: none; /* Remove underlining */
            transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out;
        }

        #submit-button {
            background-color: green;
            color: white;
            width: 100%; /* Make submit button fill its container */
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.2em;
            margin-top: 10px; /* Add some space between input and button */
        }

        .invisible-box {
            height: 55px; /* Adjust the height as needed */
        }

    </style>
</head>
<body>

<div class="container">
    <h1 class="center-text {% if selected_profile %}green{% else %}red{% endif %}">
        <br> Please Input a Price($) YOU Believe is Fair
        {% if selected_profile %}
        <br>
            <br>Profile: {{ selected_profile }}
        {% else %}
            <br><a href="{% url 'profiles' %}" class="profile-link">No profile selected. Click to select.</a>
        {% endif %}
    </h1>

    <!-- Profile selection form -->
    <form method="post" action="{% url 'jobs' %}">
        {% csrf_token %}
        {% if not selected_profile %}
            {% for profile in profiles %}
                <button type="submit" name="selected_profile" value="{{ profile }}" class="big-button">
                    {{ profile }}
                </button>
            {% endfor %}
        {% endif %}
    </form>


    {% if selected_profile %}

    <div class="job-section" id="reoccurring-jobs">
        <div class="text-center">
            <div class="job-section-title">Reoccurring Jobs</div>
            <form method="post" action="{% url 'submit_prices' %}" id="reoccurring-jobs-form">
                {% csrf_token %}
                {% for job in jobs_list %}
                    {% if not job.one_off %}
                        <div class="job-item">
                            <button class="job-button">
                                {{ job.name }}
                                <div class="job-input">
                                <input type="number" step = "any" class="positive-number-input" name="{{ job.name }}" placeholder="$" min="0" required>
                            </div>
                            </button>

                        </div>
                    {% endif %}
                {% endfor %}
                <button id="submit-button" type="submit">Submit Prices</button>
            </form>
        </div>
    </div>

    <!-- One-off Jobs Section -->
    <div class="job-section" id="one-off-jobs">
        <div class="text-center">
            <div class="job-section-title">One-off Jobs</div>
            <form method="post" action="{% url 'submit_prices' %}" id="one-off-jobs-form">
                {% csrf_token %}
                {% for job in jobs_list %}
                    {% if job.one_off %}
                        <div class="job-item">
                            <button class="job-button">
                                {{ job.name }}
                                <div class="job-input">
                                <input type="number" step = "any" class="positive-number-input" name="{{ job.name }}" placeholder="$" min="0" required>
                            </div>
                            </button>

                        </div>
                    {% endif %}
                {% endfor %}
                <button id="submit-button" type="submit">Submit Prices</button>
            </form>
        </div>
    </div>

    {% endif %}

    <div class="invisible-box"></div>

    <script>

        document.addEventListener("DOMContentLoaded", function() {
            // Check if there are job buttons in reoccurring jobs section
            var reoccurringJobsContainer = document.getElementById("reoccurring-jobs");
            var reoccurringJobButtons = reoccurringJobsContainer.querySelectorAll(".job-item");
            if (reoccurringJobButtons.length === 0) {
                reoccurringJobsContainer.style.display = "none";
            }

            // Check if there are job buttons in one-off jobs section
            var oneOffJobsContainer = document.getElementById("one-off-jobs");
            var oneOffJobButtons = oneOffJobsContainer.querySelectorAll(".job-item");
            if (oneOffJobButtons.length === 0) {
                oneOffJobsContainer.style.display = "none";
            }
        });

    </script>
</body>
</html>
